(function(){var a,b,c,d={}.hasOwnProperty;null==window.performance&&(window.performance={}),performance.now=function(){return performance.now||performance.webkitNow||performance.mozNow||performance.msNow||performance.oNow||function(){return(new Date).getTime()}}(),window.URL=function(){return window.URL||window.webkitURL}(),c=function(a,b){return null==b&&(b="log"),console&&console[b]?console[b]("WorkerBench says: '"+a+"'"):void 0},a=function(){var a;return a=function(){var a,b,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return"undefined"==typeof Worker||null===Worker?(q=1,j=function(){return c("WebWorkers are not available."),!1},h=i=k=j):(o="self.onmessage = function (e) {\n  var endTime = Date.now() + e.data;\n  while (Date.now() < endTime) {\n    (function() {})();\n  }\n  self.postMessage('Finished');\n};",n=null,q=null,p={MAX_WORKERS_TO_TEST_FOR:8,NUMBER_OF_TIMES_TO_BENCHMARK:9,PATH_TO_WORKER_SCRIPT:".",ON_COMPLETE:function(a){return alert("Optimum Web Workers: "+a)}},r=function(a,b){var d;return null==b&&(b={}),0!==a.length?s(a,b):(q=m(b),c("Optimum Web Workers: "+g()),d=(performance.now()-n)/1e3,c("Benchmarks took: "+d+" seconds."),p.ON_COMPLETE(q))},s=function(a,b,c,d){var e,f,g,h,i;return null==c&&(c=[]),null==d&&(d=[]),e=a.shift(),g=100/e,h=function(g){return c.push(g.data),c.length===e?(null==b[e]&&(b[e]=[]),b[e].push(performance.now()-f),d.map(function(a){return a.terminate()}),l(e,a,b)):void 0},function(){i=[];for(var a=0;e>=0?e>a:a>e;e>=0?a++:a--)i.push(a);return i}.apply(this).map(function(a){var b;return window.URL&&window.URL.createObjectURL&&window.Blob?(b=new Blob([o.toString()],{type:"text/javascript"}),d[a]=new Worker(window.URL.createObjectURL(b))):d[a]=new Worker(""+p.PATH_TO_WORKER_SCRIPT+"/worker.min.js"),d[a].addEventListener("message",h)}),f=performance.now(),d.map(function(a){return a.postMessage(g)})},l=function(a,b,c){var d,e,f,g;return c[a].length<p.NUMBER_OF_TIMES_TO_BENCHMARK?b.unshift(a):(p.NUMBER_OF_TIMES_TO_BENCHMARK>2&&(g=c[a].sort(),c[a]=g.slice(1,c[a].length-1)),c[a]=c[a].reduce(function(a,b){return a+b})/p.NUMBER_OF_TIMES_TO_BENCHMARK,d=c[a],e=c[a-1],f=c[a-2],a>2&&d>e&&d>f&&(b=[])),r(b,c)}),m=function(a,b,c){var e,f;null==b&&(b=1/0),null==c&&(c=0);for(f in a)d.call(a,f)&&(e=a[f],b>e&&(b=e,c=+f));return c},k=function(){return c("WebWorkers are available."),!0},f=Math.pow,b=Math.ceil,e=Math.log,a=Math.LN2,h=function(c){var d;return null==c&&(c={}),d=c.maxWorkersToTestFor||p.MAX_WORKERS_TO_TEST_FOR,p.MAX_WORKERS_TO_TEST_FOR=f(2,b(e(d)/a)),p.NUMBER_OF_TIMES_TO_BENCHMARK=c.numberOfTimesToBenchmark||p.NUMBER_OF_TIMES_TO_BENCHMARK,p.PATH_TO_WORKER_SCRIPT=c.pathToWorkerScript||p.PATH_TO_WORKER_SCRIPT,p.ON_COMPLETE=c.onComplete||p.ON_COMPLETE},i=function(b){var c;return null!=b&&"function"==typeof b&&(p.ON_COMPLETE=b),n=performance.now(),r(function(){c=[];for(var b=0,d=e(p.MAX_WORKERS_TO_TEST_FOR)/a;d>=0?d>=b:b>=d;d>=0?b++:b--)c.push(b);return c}.apply(this).map(function(a){return f(2,a)}))},g=function(){return q?q:(c("Benchmark not yet complete.","warn"),!1)},null!=("undefined"!=typeof window&&null!==window?window.navigator:void 0)&&window.navigator.hardwareConcurrency&&(i=function(a){return null==a&&(a=p.ON_COMPLETE),null!=a&&"function"==typeof a?a(navigator.hardwareConcurrency):void 0},g=function(){return navigator.hardwareConcurrency}),null==("undefined"!=typeof window&&null!==window?window.navigator:void 0)||window.navigator.hardwareConcurrency||(navigator.getHardwareConcurrency=i,Object.defineProperty(navigator,"hardwareConcurrency",{get:g})),{workersAvailable:k,setup:h,start:i,result:g}}()},(b=function(a){return"function"==typeof window.define&&define.amd?define(a):window.WorkerBench=a()})(a)}).call(this);